<!DOCTYPE HTML>
<html lang="de" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Funktionen | Die Programmiersprache Rust</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.5.1">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-anchors/plugin.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-search/search.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    

        
    
    
    <link rel="next" href="../book/Primitive_Typen.html" />
    
    
    <link rel="prev" href="../book/Variablenbindung.html" />
    

        
    </head>
    <body>
        
        
    <div class="book" data-level="4.2" data-chapter-title="Funktionen" data-filepath="book/Funktionen.md" data-basepath=".." data-revision="Fri Mar 18 2016 18:12:36 GMT+0100 (CET)">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Einführung
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="book/Erste_Schritte.html">
            
                
                    <a href="../book/Erste_Schritte.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Erste Schritte
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1" data-path="book/Rust_Installieren.html">
            
                
                    <a href="../book/Rust_Installieren.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                        Rust installieren
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="book/Hallo_Welt.html">
            
                
                    <a href="../book/Hallo_Welt.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                        Hallo Welt
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="book/Hallo_Cargo.html">
            
                
                    <a href="../book/Hallo_Cargo.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.</b>
                        
                        Hallo Cargo
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" data-path="book/Lerne_Rust.html">
            
                
                    <a href="../book/Lerne_Rust.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Lerne Rust
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1" data-path="book/Ratespiel.html">
            
                
                    <a href="../book/Ratespiel.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        Ratespiel
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="book/Speisende_Philosophen.html">
            
            <span><b>2.2.</b> Speisende Philosophen</span>
            
            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="book/Rust_In_Anderen_Sprachen.html">
            
            <span><b>2.3.</b> Rust in anderen Sprachen</span>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3" data-path="book/Effektives_Rust.html">
            
                
                    <a href="../book/Effektives_Rust.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        Effektives Rust
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1" data-path="book/Der_Stack_Und_Der_Heap.html">
            
                
                    <a href="../book/Der_Stack_Und_Der_Heap.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                        Der Stack und der Heap
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="book/Testen.html">
            
                
                    <a href="../book/Testen.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.</b>
                        
                        Testen
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="book/Bedingte_Kompilierung.html">
            
                
                    <a href="../book/Bedingte_Kompilierung.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.3.</b>
                        
                        Bedingte Kompilierung
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="book/Dokumentation.html">
            
                
                    <a href="../book/Dokumentation.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.4.</b>
                        
                        Dokumentation
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.5" data-path="book/Iteratoren.html">
            
                
                    <a href="../book/Iteratoren.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.5.</b>
                        
                        Iteratoren
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.6" data-path="book/Nebenläufigkeit.html">
            
                
                    <a href="../book/Nebenläufigkeit.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.6.</b>
                        
                        Nebenläufigkeit
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.7" data-path="book/Fehlerbehandlung.html">
            
            <span><b>3.7.</b> Fehlerbehandlung</span>
            
            
        </li>
    
        <li class="chapter " data-level="3.8" data-path="book/Garantien_Wählen.html">
            
            <span><b>3.8.</b> Garantien Wählen</span>
            
            
        </li>
    
        <li class="chapter " data-level="3.9" data-path="book/FFI.html">
            
            <span><b>3.9.</b> FFI</span>
            
            
        </li>
    
        <li class="chapter " data-level="3.10" data-path="book/Borrow_Und_AsRef.html">
            
            <span><b>3.10.</b> Borrow und AsRef</span>
            
            
        </li>
    
        <li class="chapter " data-level="3.11" data-path="book/Release_Kanäle.html">
            
            <span><b>3.11.</b> Release Kanäle</span>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4" data-path="book/Syntax_Und_Semantik.html">
            
                
                    <a href="../book/Syntax_Und_Semantik.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        Syntax und Semantik
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1" data-path="book/Variablenbindung.html">
            
                
                    <a href="../book/Variablenbindung.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                        Variablenbindung
                    </a>
            
            
        </li>
    
        <li class="chapter active" data-level="4.2" data-path="book/Funktionen.html">
            
                
                    <a href="../book/Funktionen.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.2.</b>
                        
                        Funktionen
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="book/Primitive_Typen.html">
            
                
                    <a href="../book/Primitive_Typen.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.3.</b>
                        
                        Primitive Typen
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.4" data-path="book/Kommentare.html">
            
                
                    <a href="../book/Kommentare.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.4.</b>
                        
                        Kommentare
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.5" data-path="book/If.html">
            
                
                    <a href="../book/If.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.5.</b>
                        
                        if
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.6" data-path="book/Schleifen.html">
            
                
                    <a href="../book/Schleifen.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.6.</b>
                        
                        Schleifen
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.7" data-path="book/Besitz.html">
            
                
                    <a href="../book/Besitz.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.7.</b>
                        
                        Besitz
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.8" data-path="book/Referenzen_Und_Ausleihen.html">
            
                
                    <a href="../book/Referenzen_Und_Ausleihen.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.8.</b>
                        
                        Referenzen und Ausleihen
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.9" data-path="book/Lebensdauer.html">
            
                
                    <a href="../book/Lebensdauer.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.9.</b>
                        
                        Lebensdauer
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.10" data-path="book/Veränderbarkeit.html">
            
            <span><b>4.10.</b> Veränderbarkeit</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.11" data-path="book/Structs.html">
            
                
                    <a href="../book/Structs.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.11.</b>
                        
                        Structs
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.12" data-path="book/Enums.html">
            
            <span><b>4.12.</b> Enums</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.13" data-path="book/Match.html">
            
            <span><b>4.13.</b> Match</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.14" data-path="book/Muster.html">
            
            <span><b>4.14.</b> Muster</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.15" data-path="book/Methodensyntax.html">
            
            <span><b>4.15.</b> Methodensyntax</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.16" data-path="book/Vektoren.html">
            
            <span><b>4.16.</b> Vektoren</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.17" data-path="book/Strings.html">
            
            <span><b>4.17.</b> Strings</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.18" data-path="book/Generics.html">
            
            <span><b>4.18.</b> Generics</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.19" data-path="book/Traits.html">
            
            <span><b>4.19.</b> Traits</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.20" data-path="book/Drop.html">
            
            <span><b>4.20.</b> Drop</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.21" data-path="book/If_Let.html">
            
            <span><b>4.21.</b> if let</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.22" data-path="book/Trait_Objekte.html">
            
            <span><b>4.22.</b> Trait Objekte</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.23" data-path="book/Closures.html">
            
            <span><b>4.23.</b> Closures</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.24" data-path="book/UFCS.html">
            
            <span><b>4.24.</b> Universal Function Call Syntax</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.25" data-path="book/Crates_Und_Module.html">
            
            <span><b>4.25.</b> Crates und Module</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.26" data-path="book/Const_Und_Static.html">
            
            <span><b>4.26.</b> `const` und `static`</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.27" data-path="book/Attribute.html">
            
            <span><b>4.27.</b> Attribute</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.28" data-path="book/Type_Aliase.html">
            
            <span><b>4.28.</b> `type` Aliase</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.29" data-path="book/Zwischen_Typen_Umwandeln.html">
            
            <span><b>4.29.</b> Zwischen typen umwandeln</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.30" data-path="book/Assoziierte_Typen.html">
            
            <span><b>4.30.</b> Assoziierte Typen</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.31" data-path="book/Größenlose_Typen.html">
            
            <span><b>4.31.</b> Größenlose Typen</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.32" data-path="book/Operatoren_Und_Überladen.html">
            
            <span><b>4.32.</b> Operatoren und Überladen</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.33" data-path="book/Deref_Umwandlung.html">
            
            <span><b>4.33.</b> Deref Umwandlung</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.34" data-path="book/Makros.html">
            
            <span><b>4.34.</b> Makros</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.35" data-path="book/Raw_Zeiger.html">
            
            <span><b>4.35.</b> Raw Zeiger</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.36" data-path="book/Unsafe.html">
            
            <span><b>4.36.</b> `unsafe`</span>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5" data-path="book/Nightly_Rust.html">
            
            <span><b>5.</b> Nightly Rust</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1" data-path="book/Compiler_Plugins.html">
            
            <span><b>5.1.</b> Compiler Plugins</span>
            
            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="book/Inline_Assembly.html">
            
            <span><b>5.2.</b> Inline Assembly</span>
            
            
        </li>
    
        <li class="chapter " data-level="5.3" data-path="book/No_Stdlib.html">
            
            <span><b>5.3.</b> `no_stdlib`</span>
            
            
        </li>
    
        <li class="chapter " data-level="5.4" data-path="book/Intrinsics.html">
            
            <span><b>5.4.</b> Intrinsics</span>
            
            
        </li>
    
        <li class="chapter " data-level="5.5" data-path="book/Lang_Items.html">
            
            <span><b>5.5.</b> Lang items</span>
            
            
        </li>
    
        <li class="chapter " data-level="5.6" data-path="book/Fortgeschrittenes_Linken.html">
            
            <span><b>5.6.</b> Fortgeschrittenes Linken</span>
            
            
        </li>
    
        <li class="chapter " data-level="5.7" data-path="book/Benchmark_Tests.html">
            
            <span><b>5.7.</b> Benchmark Tests</span>
            
            
        </li>
    
        <li class="chapter " data-level="5.8" data-path="book/Box_Syntax_Und_Muster.html">
            
            <span><b>5.8.</b> Box Syntax und Muster</span>
            
            
        </li>
    
        <li class="chapter " data-level="5.9" data-path="book/Slice_Muster.html">
            
            <span><b>5.9.</b> Slice Muster</span>
            
            
        </li>
    
        <li class="chapter " data-level="5.10" data-path="book/Assoziierte_Konstanten.html">
            
            <span><b>5.10.</b> Assoziierte Konstanten</span>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6" data-path="book/Glossar.html">
            
            <span><b>6.</b> Glossar</span>
            
            
        </li>
    
        <li class="chapter " data-level="7" data-path="book/Akademische_Forschung.html">
            
            <span><b>7.</b> Akademische Forschung</span>
            
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Veröffentlicht mit GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" >Die Programmiersprache Rust</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="funktionen"><a name="funktionen" class="plugin-anchor" href="#funktionen"><span class="fa fa-link"></span></a>Funktionen</h1>
<p>Jedes Rust Programm hat mindestens eine Funktion,
die <code>main</code>:</p>
<pre><code class="lang-rust"><span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">main</span></span>() {
}
</code></pre>
<p>Das ist die simpelste Funktionsdeklaration. Wie wir zuvor schon erw&#xE4;hnt haben,
leitet <code>fn</code> eine Funktion ein. Darauf folgt der Name und
ein leeres paar Klammern, da diese Funktion keine Argumente hat,
und ein Paar geschweifte Klammern, die den Funktionsk&#xF6;rper repr&#xE4;sentieren.
Hier ist eine Funktion namens <code>foo</code>:</p>
<pre><code class="lang-rust"><span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">foo</span></span>() {
}
</code></pre>
<p>Ok, wie funktioniert das nun mit Argumenten? Hier eine Funktion,
die eine Zahl ausgibt:</p>
<pre><code class="lang-rust"><span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">print_number</span></span>(x: <span class="hljs-keyword">i32</span>) {
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;x is: {}&quot;</span>, x);
}
</code></pre>
<p>Hier ist ein vollst&#xE4;ndiges Programm, welches <code>print_number</code> verwendet:</p>
<pre><code class="lang-rust"><span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">main</span></span>() {
    print_number(<span class="hljs-number">5</span>);
}

<span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">print_number</span></span>(x: <span class="hljs-keyword">i32</span>) {
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;x is: {}&quot;</span>, x);
}
</code></pre>
<p>Wie du sehen kannst funktionieren Funktionsargumente
&#xE4;hnlich wie <code>let</code> Deklarationen:
Man f&#xFC;gt dem Namen einen Typ durch ein Doppelpunkt hinzu.</p>
<p>Hier ist ein vollst&#xE4;ndiges Programm,
welches zwei Zahlen addiert und dann ausgibt:</p>
<pre><code class="lang-rust"><span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">main</span></span>() {
    print_sum(<span class="hljs-number">5</span>, <span class="hljs-number">6</span>);
}

<span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">print_sum</span></span>(x: <span class="hljs-keyword">i32</span>, y: <span class="hljs-keyword">i32</span>) {
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;sum is: {}&quot;</span>, x + y);
}
</code></pre>
<p>Wie du siehst werden Argumente durch ein Komma getrennt.
Das gilt sowohl f&#xFC;r den Aufruf als auch f&#xFC;r die Deklaration von Funktionen.</p>
<p>Anders als bei <code>let</code>, <strong>musst</strong> du die Typen von Funktionsargumenten angeben.
Das hier funktioniert nicht:</p>
<pre><code class="lang-rust"><span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">print_sum</span></span>(x, y) {
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;sum is: {}&quot;</span>, x + y);
}
</code></pre>
<pre><code>
Man bekommt diesen Fehler:

```text
expected one of `!`, `:`, or `@`, found `)`
fn print_number(x, y) {
</code></pre><p>Das ist eine bewusste Designentscheidung.
Obwohl das herleiten der Typen eines kompletten Programmes m&#xF6;glich ist,
wie zum Beispiel in Sprachen wie Haskell, wird dennoch h&#xE4;ufig dazu geraten
die Typen ausdr&#xFC;cklich zu dokumentieren.
Wir stimmen zu, dass ausdr&#xFC;ckliche Typvermerke in Funktionssignaturen
und Typherleitung innerhalb von Funktionsk&#xF6;rpern
wundervoller Mittelweg ist.</p>
<p>Wie gibt man einen Wert zur&#xFC;ck?
Hier ist eine Funktion, die einen Wert inkrementiert.</p>
<pre><code class="lang-rust"><span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">add_one</span></span>(x: <span class="hljs-keyword">i32</span>) -&gt; <span class="hljs-keyword">i32</span> {
    x + <span class="hljs-number">1</span>
}
</code></pre>
<p>Rust Funktionen geben genau einen Wert zur&#xFC;ck. Diesen gibt man nach einem
&quot;Pfeil&quot; an, welcher aus einem Bindestrich (<code>-</code>), gefolgt von einem
Gr&#xF6;&#xDF;er-Gleich Zeichen (<code>&gt;</code>) besteht.
Die letzte Zeile der Funktion ist automatisch der R&#xFC;ckgabewert der Funktion.
Du wirst das hier das Semikolon fehlt. Wenn wir es hinzuf&#xFC;gen:</p>
<pre><code class="lang-rust"><span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">add_one</span></span>(x: <span class="hljs-keyword">i32</span>) -&gt; <span class="hljs-keyword">i32</span> {
    x + <span class="hljs-number">1</span>;
}
</code></pre>
<p>W&#xFC;rden wir einen Fehler bekommen:</p>
<pre><code class="lang-text">error: not all control paths return a value
fn add_one(x: i32) -&gt; i32 {
     x + 1;
}

help: consider removing this semicolon:
     x + 1;
          ^
</code></pre>
<p>Dies offenbart zwei interessante Aspekte von Rust:
Rust ist eine ausdrucksorientierte Sprache [expression-based language].
Es gibt nur zwei Arten von Anweisungen, alles andere ist ein Ausdruck.</p>
<p>Also worin liegt der Unterschied? Ausdr&#xFC;cke geben einen Wert zur&#xFC;ck,
Anweisungen nicht. Deswegen bekommen wir hier eine
&#x2018;not all control paths return a value&#x2019; Meldung:
Die Anweisung <code>x + 1;</code> gibt keinen Wert zur&#xFC;ck.
Es gibt zwei Arten von Anweisungen in Rust:
<code>Deklarations-Anweisungen</code> und <code>Ausdrucks-Anweisungen</code>.
Alles andere ist ein Ausdruck.
Lass uns zuerst &#xFC;ber <em>Deklarations-Anweisungen</em> sprechen.</p>
<p>In manchen Sprachen k&#xF6;nnen Variablenbindungen auch als Ausdruck geschrieben
werden. Wie z.B. in Ruby:</p>
<pre><code class="lang-ruby">x = y = <span class="hljs-number">5</span>
</code></pre>
<p>In Rust jedoch ist die Variablenbindung mit <code>let</code> <em>kein</em> Ausdruck.
Das Folgende erzeugt einen Fehler beim Kompilieren:</p>
<pre><code class="lang-text">let x = (let y = 5); // expected identifier, found keyword `let`
</code></pre>
<p>Der Compiler sagt uns hier, dass er den Beginn eines Ausdrucks erwartet hat,
denn ein <code>let</code> kann nur eine Anweisung einleiten, aber keinen Ausdruck.</p>
<p>Beachte, dass eine Zuweisung an eine bereits gebundene Variable (z.B. <code>y = 5</code>)
trotzdem ein Ausdruck ist, auch wenn dieser nicht besonders n&#xFC;tzlich ist.
Anders als in anderen Sprachen, wo der zugewiesene Wert zur&#xFC;ckgegeben
werden w&#xFC;rde, wird in Rust stattdessen das leere Tupel <code>()</code> zur&#xFC;ckgegeben.
Der Grund daf&#xFC;r ist, dass der zugewiesene Wert <a href="Besitz.html">nur einen Besitzer</a>
haben kann und einen anderen Wert zur&#xFC;ckzugeben w&#xE4;re zu &#xFC;berraschend:</p>
<pre><code class="lang-rust"><span class="hljs-keyword">let</span> <span class="hljs-keyword">mut</span> y = <span class="hljs-number">5</span>;

<span class="hljs-keyword">let</span> x = (y = <span class="hljs-number">6</span>);  <span class="hljs-comment">// x has the value `()`, not `6`</span>
</code></pre>
<p>Die zweite Art von Anweisung in Rust ist die <em>Ausdrucks-Anweisung</em>.
Ihr Zweck ist es jeden Ausdruck in eine Anweisung zu verwandeln.
In praktischer Hinsicht erwartet Rusts Grammatik, dass Anweisungen
aufeinander folgen. Das bedeutet, dass man Semikolons nutzt um
Ausdr&#xFC;cke voneinander zu trennen. Das bedeutet auch,
dass Rust anderen Sprachen, welche auch ein Semikolon am ende einer Zeile
haben, sehr &#xE4;hnlich sieht und man in Rust fast an jedem Ende einer Zeile ein
Semikolon sieht.</p>
<p>Wegen welcher Ausnahme sagen wir &quot;fast&quot;?.
Du hast sie bereits gesehen und zwar in diesem Code:</p>
<pre><code class="lang-rust"><span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">add_one</span></span>(x: <span class="hljs-keyword">i32</span>) -&gt; <span class="hljs-keyword">i32</span> {
    x + <span class="hljs-number">1</span>
}
</code></pre>
<p>Unsere Funktion gibt an ein <code>i32</code> zur&#xFC;ckzugeben, aber mit einem Semikolon
w&#xFC;rden wir stattdessen <code>()</code> zur&#xFC;ckgeben.
Rust versteht, dass wir das wahrscheinlich nicht wollten und schl&#xE4;gt uns in
der Fehlermeldung, die wir sahen, vor das Semikolon zu entfernen.</p>
<h2 id="fr&#xFC;hzeitige-r&#xFC;ckgabe"><a name="fr&#xFC;hzeitige-r&#xFC;ckgabe" class="plugin-anchor" href="#fr&#xFC;hzeitige-r&#xFC;ckgabe"><span class="fa fa-link"></span></a>Fr&#xFC;hzeitige R&#xFC;ckgabe</h2>
<p>Was ist mit fr&#xFC;hzeitiger R&#xFC;ckgabe [early returns]?
Rust hat daf&#xFC;r ein Schlpsselwort namens <code>return</code>:</p>
<pre><code class="lang-rust"><span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">foo</span></span>(x: <span class="hljs-keyword">i32</span>) -&gt; <span class="hljs-keyword">i32</span> {
    <span class="hljs-keyword">return</span> x;

    <span class="hljs-comment">// we never run this code!</span>
    x + <span class="hljs-number">1</span>
}
</code></pre>
<p><code>return</code> in der letzten Zeile einer Funktion zu verwenden funktioniert zwar,
aber wird als schlechten Stil angesehen:</p>
<pre><code class="lang-rust"><span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">foo</span></span>(x: <span class="hljs-keyword">i32</span>) -&gt; <span class="hljs-keyword">i32</span> {
    <span class="hljs-keyword">return</span> x + <span class="hljs-number">1</span>;
}
</code></pre>
<p>Die vorherige Definition ohne <code>return</code> sieht vielleicht etwas komisch f&#xFC;r dich
aus, falls du noch nicht mit Ausdrucksorientierten Sprachen gearbeitet hast,
aber du wirst dich mit der Zeit daran gew&#xF6;hnen.</p>
<h2 id="divergierende-funktionde"><a name="divergierende-funktionde" class="plugin-anchor" href="#divergierende-funktionde"><span class="fa fa-link"></span></a>Divergierende Funktionde</h2>
<p>Rust hat eine spzielle Syntax f&#xFC;r sogennannte &#x2018;divergierende Funktionen&#x2019;
[diverging functions], also Funktionen, die niemals zur&#xFC;ckkehren:</p>
<pre><code class="lang-rust"><span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">diverges</span></span>() -&gt; ! {
    <span class="hljs-built_in">panic!</span>(<span class="hljs-string">&quot;This function never returns!&quot;</span>);
}
</code></pre>
<p><code>panic!()</code> ist ein Makro, &#xE4;hnlich wie <code>println!()</code>, was wir bereits kennen.
Anders jedoch als <code>println!()</code> sorgt <code>panic!()</code> daf&#xFC;r, dass der aktuelle
Thread mit einer Fehlermeldung abst&#xFC;rzt. Weil diese Funktion einen Crash hervorruft, kehrt sie niemals zur&#xFC;ck, deswegen hat sie den Typ &#x2018;<code>!</code>&#x2019;,
was man als &#x2018;divergiert&#x2019; liest.</p>
<p>Wenn du zu einer main Funktion einen <code>diverges()</code> Aufruf hinzuf&#xFC;gst
und das Programm ausf&#xFC;hrst, dann sieht die Ausgabe in etwa so aus:</p>
<pre><code class="lang-text">thread &#x2018;<main>&#x2019; panicked at &#x2018;This function never returns!&#x2019;, hello.rs:2
</main></code></pre>
<p>Wenn du mehr Informationen haben willst, dann kannst du einen Backtrace durch
Setzen der <code>RUST_BACKTRACE</code> Umgebungsvariable erhalten:</p>
<pre><code class="lang-text">$ RUST_BACKTRACE=1 ./diverges
thread &apos;<main>&apos; panicked at &apos;This function never returns!&apos;, hello.rs:2
stack backtrace:
   1:     0x7f402773a829 - sys::backtrace::write::h0942de78b6c02817K8r
   2:     0x7f402773d7fc - panicking::on_panic::h3f23f9d0b5f4c91bu9w
   3:     0x7f402773960e - rt::unwind::begin_unwind_inner::h2844b8c5e81e79558Bw
   4:     0x7f4027738893 - rt::unwind::begin_unwind::h4375279447423903650
   5:     0x7f4027738809 - diverges::h2266b4c4b850236beaa
   6:     0x7f40277389e5 - main::h19bb1149c2f00ecfBaa
   7:     0x7f402773f514 - rt::unwind::try::try_fn::h13186883479104382231
   8:     0x7f402773d1d8 - __rust_try
   9:     0x7f402773f201 - rt::lang_start::ha172a3ce74bb453aK5w
  10:     0x7f4027738a19 - main
  11:     0x7f402694ab44 - __libc_start_main
  12:     0x7f40277386c8 - <unknown>
  13:                0x0 - <unknown>
</unknown></unknown></main></code></pre>
<p><code>RUST_BACKTRACE</code> funktioniert auch mit Cargos <code>run</code> Befehl:</p>
<pre><code class="lang-text">$ RUST_BACKTRACE=1 cargo run
     Running `target/debug/diverges`
thread &apos;<main>&apos; panicked at &apos;This function never returns!&apos;, hello.rs:2
stack backtrace:
   1:     0x7f402773a829 - sys::backtrace::write::h0942de78b6c02817K8r
   2:     0x7f402773d7fc - panicking::on_panic::h3f23f9d0b5f4c91bu9w
   3:     0x7f402773960e - rt::unwind::begin_unwind_inner::h2844b8c5e81e79558Bw
   4:     0x7f4027738893 - rt::unwind::begin_unwind::h4375279447423903650
   5:     0x7f4027738809 - diverges::h2266b4c4b850236beaa
   6:     0x7f40277389e5 - main::h19bb1149c2f00ecfBaa
   7:     0x7f402773f514 - rt::unwind::try::try_fn::h13186883479104382231
   8:     0x7f402773d1d8 - __rust_try
   9:     0x7f402773f201 - rt::lang_start::ha172a3ce74bb453aK5w
  10:     0x7f4027738a19 - main
  11:     0x7f402694ab44 - __libc_start_main
  12:     0x7f40277386c8 - <unknown>
  13:                0x0 - <unknown>
</unknown></unknown></main></code></pre>
<p>Divergierende Funktionen passen mit jedem Typen zusammen:</p>
<pre><code class="lang-rust"><span class="hljs-keyword">let</span> x: <span class="hljs-keyword">i32</span> = diverges();
<span class="hljs-keyword">let</span> x: <span class="hljs-built_in">String</span> = diverges();
</code></pre>
<h2 id="funktionszeiger"><a name="funktionszeiger" class="plugin-anchor" href="#funktionszeiger"><span class="fa fa-link"></span></a>Funktionszeiger</h2>
<p>Wir k&#xF6;nnen auch eine Variablenbindung erzeugen, die auf eine Funktion zeigt:</p>
<pre><code class="lang-rust"><span class="hljs-keyword">let</span> f: <span class="hljs-function"><span class="hljs-keyword">fn</span></span>(<span class="hljs-keyword">i32</span>) -&gt; <span class="hljs-keyword">i32</span>;
</code></pre>
<p><code>f</code> ist eine Variable, die auf eine Funktion zeigt, welche ein <code>i32</code> als
Argument entgegennimmt und ein <code>i32</code> zur&#xFC;ckgibt. Zum Beispiel:</p>
<pre><code class="lang-rust"><span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">plus_one</span></span>(i: <span class="hljs-keyword">i32</span>) -&gt; <span class="hljs-keyword">i32</span> {
    i + <span class="hljs-number">1</span>
}

<span class="hljs-comment">// without type inference</span>
<span class="hljs-keyword">let</span> f: <span class="hljs-function"><span class="hljs-keyword">fn</span></span>(<span class="hljs-keyword">i32</span>) -&gt; <span class="hljs-keyword">i32</span> = plus_one;

<span class="hljs-comment">// with type inference</span>
<span class="hljs-keyword">let</span> f = plus_one;
</code></pre>
<p>Wir k&#xF6;nnen dann <code>f</code> benutzen um die Funktion aufzurufen:</p>
<pre><code class="lang-rust"><span class="hljs-keyword">let</span> six = f(<span class="hljs-number">5</span>);
</code></pre>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../book/Variablenbindung.html" class="navigation navigation-prev " aria-label="Previous page: Variablenbindung"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../book/Primitive_Typen.html" class="navigation navigation-next " aria-label="Next page: Primitive Typen"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

    
    <script src="../gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"anchors":{},"highlight":{},"search":{},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
