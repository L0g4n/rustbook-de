<!DOCTYPE HTML>
<html lang="de" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Iteratoren | Die Programmiersprache Rust</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.4.2">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-anchors/plugin.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
    

        
    
    
    <link rel="next" href="../book/Nebenläufigkeit.html" />
    
    
    <link rel="prev" href="../book/Dokumentation.html" />
    

        
    </head>
    <body>
        
        
    <div class="book" data-level="3.5" data-basepath=".." data-revision="Mon Nov 02 2015 15:15:21 GMT+0100 (CET)">
    

<div class="book-summary">
    <div class="book-search" role="search">
        <input type="text" placeholder="Suchbegriff eingeben" class="form-control" />
    </div>
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Einführung
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="book/Erste_Schritte.html">
            
                
                    <a href="../book/Erste_Schritte.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Erste Schritte
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1" data-path="book/Rust_Installieren.html">
            
                
                    <a href="../book/Rust_Installieren.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                        Rust installieren
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="book/Hallo_Welt.html">
            
                
                    <a href="../book/Hallo_Welt.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                        Hallo Welt
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="book/Hallo_Cargo.html">
            
                
                    <a href="../book/Hallo_Cargo.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.</b>
                        
                        Hallo Cargo
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" data-path="book/Lerne_Rust.html">
            
                
                    <a href="../book/Lerne_Rust.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Lerne Rust
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1" data-path="book/Ratespiel.html">
            
                
                    <a href="../book/Ratespiel.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        Ratespiel
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="book/Speisende_Philosophen.html">
            
            <span><b>2.2.</b> Speisende Philosophen</span>
            
            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="book/Rust_In_Anderen_Sprachen.html">
            
            <span><b>2.3.</b> Rust in anderen Sprachen</span>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3" data-path="book/Effektives_Rust.html">
            
                
                    <a href="../book/Effektives_Rust.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        Effektives Rust
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1" data-path="book/Der_Stack_Und_Der_Heap.html">
            
                
                    <a href="../book/Der_Stack_Und_Der_Heap.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                        Der Stack und der Heap
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="book/Testen.html">
            
                
                    <a href="../book/Testen.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.</b>
                        
                        Testen
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="book/Bedingte_Kompilierung.html">
            
                
                    <a href="../book/Bedingte_Kompilierung.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.3.</b>
                        
                        Bedingte Kompilierung
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="book/Dokumentation.html">
            
                
                    <a href="../book/Dokumentation.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.4.</b>
                        
                        Dokumentation
                    </a>
            
            
        </li>
    
        <li class="chapter active" data-level="3.5" data-path="book/Iteratoren.html">
            
                
                    <a href="../book/Iteratoren.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.5.</b>
                        
                        Iteratoren
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.6" data-path="book/Nebenläufigkeit.html">
            
                
                    <a href="../book/Nebenläufigkeit.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.6.</b>
                        
                        Nebenläufigkeit
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.7" data-path="book/Fehlerbehandlung.html">
            
            <span><b>3.7.</b> Fehlerbehandlung</span>
            
            
        </li>
    
        <li class="chapter " data-level="3.8" data-path="book/Garantien_Wählen.html">
            
            <span><b>3.8.</b> Garantien Wählen</span>
            
            
        </li>
    
        <li class="chapter " data-level="3.9" data-path="book/FFI.html">
            
            <span><b>3.9.</b> FFI</span>
            
            
        </li>
    
        <li class="chapter " data-level="3.10" data-path="book/Borrow_Und_AsRef.html">
            
            <span><b>3.10.</b> Borrow und AsRef</span>
            
            
        </li>
    
        <li class="chapter " data-level="3.11" data-path="book/Release_Kanäle.html">
            
            <span><b>3.11.</b> Release Kanäle</span>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4" data-path="book/Syntax_Und_Semantik.html">
            
                
                    <a href="../book/Syntax_Und_Semantik.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        Syntax und Semantik
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1" data-path="book/Variablenbindung.html">
            
                
                    <a href="../book/Variablenbindung.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                        Variablenbindung
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="book/Funktionen.html">
            
                
                    <a href="../book/Funktionen.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.2.</b>
                        
                        Funktionen
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="book/Primitive_Typen.html">
            
                
                    <a href="../book/Primitive_Typen.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.3.</b>
                        
                        Primitive Typen
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.4" data-path="book/Kommentare.html">
            
                
                    <a href="../book/Kommentare.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.4.</b>
                        
                        Kommentare
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.5" data-path="book/If.html">
            
                
                    <a href="../book/If.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.5.</b>
                        
                        if
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.6" data-path="book/Schleifen.html">
            
                
                    <a href="../book/Schleifen.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.6.</b>
                        
                        Schleifen
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.7" data-path="book/Besitz.html">
            
                
                    <a href="../book/Besitz.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.7.</b>
                        
                        Besitz
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.8" data-path="book/Referenzen_Und_Ausleihen.html">
            
                
                    <a href="../book/Referenzen_Und_Ausleihen.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.8.</b>
                        
                        Referenzen und Ausleihen
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.9" data-path="book/Lebensdauer.html">
            
                
                    <a href="../book/Lebensdauer.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.9.</b>
                        
                        Lebensdauer
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.10" data-path="book/Veränderbarkeit.html">
            
            <span><b>4.10.</b> Veränderbarkeit</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.11" data-path="book/Structs.html">
            
                
                    <a href="../book/Structs.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.11.</b>
                        
                        Structs
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.12" data-path="book/Enums.html">
            
            <span><b>4.12.</b> Enums</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.13" data-path="book/Match.html">
            
            <span><b>4.13.</b> Match</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.14" data-path="book/Muster.html">
            
            <span><b>4.14.</b> Muster</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.15" data-path="book/Methodensyntax.html">
            
            <span><b>4.15.</b> Methodensyntax</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.16" data-path="book/Vektoren.html">
            
            <span><b>4.16.</b> Vektoren</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.17" data-path="book/Strings.html">
            
            <span><b>4.17.</b> Strings</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.18" data-path="book/Generics.html">
            
            <span><b>4.18.</b> Generics</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.19" data-path="book/Traits.html">
            
            <span><b>4.19.</b> Traits</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.20" data-path="book/Drop.html">
            
            <span><b>4.20.</b> Drop</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.21" data-path="book/If_Let.html">
            
            <span><b>4.21.</b> if let</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.22" data-path="book/Trait_Objekte.html">
            
            <span><b>4.22.</b> Trait Objekte</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.23" data-path="book/Closures.html">
            
            <span><b>4.23.</b> Closures</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.24" data-path="book/UFCS.html">
            
            <span><b>4.24.</b> Universal Function Call Syntax</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.25" data-path="book/Crates_Und_Module.html">
            
            <span><b>4.25.</b> Crates und Module</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.26" data-path="book/Const_Und_Static.html">
            
            <span><b>4.26.</b> `const` und `static`</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.27" data-path="book/Attribute.html">
            
            <span><b>4.27.</b> Attribute</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.28" data-path="book/Type_Aliase.html">
            
            <span><b>4.28.</b> `type` Aliase</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.29" data-path="book/Zwischen_Typen_Umwandeln.html">
            
            <span><b>4.29.</b> Zwischen typen umwandeln</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.30" data-path="book/Assoziierte_Typen.html">
            
            <span><b>4.30.</b> Assoziierte Typen</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.31" data-path="book/Größenlose_Typen.html">
            
            <span><b>4.31.</b> Größenlose Typen</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.32" data-path="book/Operatoren_Und_Überladen.html">
            
            <span><b>4.32.</b> Operatoren und Überladen</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.33" data-path="book/Deref_Umwandlung.html">
            
            <span><b>4.33.</b> Deref Umwandlung</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.34" data-path="book/Makros.html">
            
            <span><b>4.34.</b> Makros</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.35" data-path="book/Raw_Zeiger.html">
            
            <span><b>4.35.</b> Raw Zeiger</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.36" data-path="book/Unsafe.html">
            
            <span><b>4.36.</b> `unsafe`</span>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5" data-path="book/Nightly_Rust.html">
            
            <span><b>5.</b> Nightly Rust</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1" data-path="book/Compiler_Plugins.html">
            
            <span><b>5.1.</b> Compiler Plugins</span>
            
            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="book/Inline_Assembly.html">
            
            <span><b>5.2.</b> Inline Assembly</span>
            
            
        </li>
    
        <li class="chapter " data-level="5.3" data-path="book/No_Stdlib.html">
            
            <span><b>5.3.</b> `no_stdlib`</span>
            
            
        </li>
    
        <li class="chapter " data-level="5.4" data-path="book/Intrinsics.html">
            
            <span><b>5.4.</b> Intrinsics</span>
            
            
        </li>
    
        <li class="chapter " data-level="5.5" data-path="book/Lang_Items.html">
            
            <span><b>5.5.</b> Lang items</span>
            
            
        </li>
    
        <li class="chapter " data-level="5.6" data-path="book/Fortgeschrittenes_Linken.html">
            
            <span><b>5.6.</b> Fortgeschrittenes Linken</span>
            
            
        </li>
    
        <li class="chapter " data-level="5.7" data-path="book/Benchmark_Tests.html">
            
            <span><b>5.7.</b> Benchmark Tests</span>
            
            
        </li>
    
        <li class="chapter " data-level="5.8" data-path="book/Box_Syntax_Und_Muster.html">
            
            <span><b>5.8.</b> Box Syntax und Muster</span>
            
            
        </li>
    
        <li class="chapter " data-level="5.9" data-path="book/Slice_Muster.html">
            
            <span><b>5.9.</b> Slice Muster</span>
            
            
        </li>
    
        <li class="chapter " data-level="5.10" data-path="book/Assoziierte_Konstanten.html">
            
            <span><b>5.10.</b> Assoziierte Konstanten</span>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6" data-path="book/Glossar.html">
            
            <span><b>6.</b> Glossar</span>
            
            
        </li>
    
        <li class="chapter " data-level="7" data-path="book/Akademische_Forschung.html">
            
            <span><b>7.</b> Akademische Forschung</span>
            
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Veröffentlicht mit GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Inhaltsverzeichnis"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Suche"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Schrifteinstellungen"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">Hell</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Nacht</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    
    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Teilen"><i class="fa fa-share-alt"></i>
        </a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                <button type="button" data-sharing="twitter" class="button">
                    Auf Twitter teilen
                </button>
                <button type="button" data-sharing="google-plus" class="button">
                    Auf Google teilen
                </button>
                <button type="button" data-sharing="facebook" class="button">
                    Auf Facebook teilen
                </button>
                <button type="button" data-sharing="weibo" class="button">
                    Auf Weibo teilen
                </button>
                <button type="button" data-sharing="instapaper" class="button">
                    Auf Instapaper teilen
                </button>
            </div>
        </div>
    </div>
    

    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Google"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Twitter"><i class="fa fa-twitter"></i></a>
    
    
    


    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" >Die Programmiersprache Rust</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="iteratoren"><a name="iteratoren" class="plugin-anchor" href="#iteratoren"><span class="fa fa-link"></span></a>Iteratoren</h1>
<p>Redern wir doch mal &#xFC;ber Schleifen.</p>
<p>Erinnerst du dich noch an Rusts <code>for</code>-Schleifen?
Hier nochmal zur Erinnerung:</p>
<pre><code class="lang-rust"><span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..<span class="hljs-number">10</span> {
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;{}&quot;</span>, x);
}
</code></pre>
<p>Nun da du schon etwas mehr Rust kennst k&#xF6;nnen wir ja mal etwas genauer darauf eingehen, wie das so funktioniert.
Ranges (wie <code>0..10</code>) sind &quot;Iteratoren&quot;.
Ein Iterator ist etwas auf dem man <code>.next()</code> aufrufen kann und das uns dann eine Sequenz an Dingen gibt.</p>
<p>So wie in diesem Beispiel:</p>
<pre><code class="lang-rust"><span class="hljs-keyword">let</span> <span class="hljs-keyword">mut</span> range = <span class="hljs-number">0</span>..<span class="hljs-number">10</span>;

<span class="hljs-keyword">loop</span> {
    <span class="hljs-keyword">match</span> range.next() {
        <span class="hljs-built_in">Some</span>(x) =&gt; {
            <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;{}&quot;</span>, x);
        },
        <span class="hljs-built_in">None</span> =&gt; { <span class="hljs-keyword">break</span> }
    }
}
</code></pre>
<p>Hier erstellen wir ein <strong><em>mutable binding</em></strong> zu einer Range.
Jetzt k&#xF6;nnen wir mit <code>loop</code> dar&#xFC;ber iterieren.
Das innere <code>match</code> entscheidet anhand der Ausgabe von <code>range.next()</code> ob wir weitermachen.
<code>.next()</code> gibt ein <code>Option&lt;i32&gt;</code> aus, also entweder ein <code>Some(i32)</code>, dann machen wir weiter, oder ein <code>None</code>, dann brechen wir mit <code>break</code> ab.</p>
<p><strong>Nein</strong>, dass musst du nicht jedes mal so machen, daf&#xFC;r gibt es <code>for</code>!</p>
<p><code>for</code> ist eigentlich nur syntaktischer Zucker f&#xFC;r dieses <code>loop</code>/<code>match</code>/<code>break</code>-Konstrukt.
<code>for</code>-Schleifen sind allerdings nicht das einzige was Iteratoren benutzt.
Um seine eigenen Iteratoren verwenden zu k&#xF6;nnen muss man das <code>Iterator</code> Trait implementieren.
Wie man das macht liegt etwas au&#xDF;erhalb des Rahmens dieses Kapitels.
Rust bietet eine ganze Reihe n&#xFC;tzlicher Iterator f&#xFC;r unterschiedliche Aufgaben.
Bevor wir allerdings auf diese genauer eingehen noch ein Anti-Pattern, welches du unbedingt vermeiden solltest. Und zwar solltest du eine Range nicht zum Z&#xE4;hlen verwenden, zum Beispiel so:</p>
<pre><code class="lang-rust"><span class="hljs-keyword">let</span> nums = <span class="hljs-built_in">vec!</span>[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];

<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..nums.len() {
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;{}&quot;</span>, nums[i]);
}
</code></pre>
<p>Das ist zwar m&#xF6;glich, aber unn&#xF6;tig kompliziert, denn Vektoren bringen ihre eigenen Iteratoren mit:</p>
<pre><code class="lang-rust"><span class="hljs-keyword">let</span> nums = <span class="hljs-built_in">vec!</span>[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];

<span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> &amp;nums {
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;{}&quot;</span>, num);
}
</code></pre>
<p>Das ist besser aus zwei Gr&#xFC;nden.
Ersten dr&#xFC;ckt das besser aus worum es hier geht, es ist semantisch sinnvoller.
Und zweitens ist es effizienter und sicherer,
die erste Variante muss extra checken ob die Indexe &#xFC;berhaupt valide sind.
Das ist allgemein der Vorteil von Iteratoren, sie sind auch ohne bound checks sicher.</p>
<p>Es gibt noch eine kleine Unklarheit aufgrund der Tatsache wie <code>println!</code> funktioniert.
<code>num</code> ist eigentlich ein <code>&amp;i32</code>, also nur eine Referenz auf ein <code>i32</code>.
<code>println!</code> &#xFC;bernimmt hier das Dereferenzieren f&#xFC;r uns, wir sehen das also gar nicht.
Dementsprechend funktioniert auch dieser Code hier:</p>
<pre><code class="lang-rust"><span class="hljs-keyword">let</span> nums = <span class="hljs-built_in">vec!</span>[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];

<span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> &amp;nums {
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;{}&quot;</span>, *num);
}
</code></pre>
<p>Hier dereferenzieren wir <code>num</code> explizit.
Warum gibt uns <code>&amp;nums</code> Referenzen?
Erstens, weil wir explizit mit <code>&amp;</code> danach gefragt haben.
Zweitens, wenn es uns die Daten direkt geben w&#xFC;rde m&#xFC;ssten wir deren Besitzer werden, das hei&#xDF;t es m&#xFC;sste implizit kopieren.
Mit <code>&amp;</code> leihen wir nur Referenzen zu den Elementen aus, ohne kopieren oder verschieben zu m&#xFC;ssen.</p>
<p>Nun da wir festgestellt haben, dass Ranges nicht das tun was wir wollen,
reden wir mal dar&#xFC;ber was wir eigentlich wollen.</p>
<p>Es gibt drei Kategorien von Dingen die hier wichtig sind:
<strong>Iteratoren</strong>, <strong>Iterator-Adapter</strong> und <strong>Konsumenten</strong>.</p>
<ul>
<li><em>Iteratoren</em> geben uns eine Sequenz von Werten, einen nach dem anderen.</li>
<li><em>Iterator-Adapter</em> operieren auf Iteratoren und produzieren andere Iteratoren</li>
<li><em>Konsumenten</em> nehmen Iteratoren und produzieren daraus finale Werte oder Mengen.</li>
</ul>
<p>Reden wir als erstes mal &#xFC;ber die Konsumenten, da wir ja schon einen Iterator gesehen haben, Ranges.</p>
<h2 id="konsumenten"><a name="konsumenten" class="plugin-anchor" href="#konsumenten"><span class="fa fa-link"></span></a>Konsumenten</h2>
<p>Ein <em>Konsument</em> &quot;konsumiert&quot; einen Iterator, das hei&#xDF;t, dass er daraus eine feste  Menge Werte oder einen einzelnen Wert daraus erstellt.
Der gebr&#xE4;uchlichste Konsument ist <code>collect()</code>.
Dieser Code hier kompiliert nicht, zeigt aber die Verwendung von <code>collect()</code>:</p>
<pre><code class="lang-rust"><span class="hljs-keyword">let</span> one_to_one_hundred = (<span class="hljs-number">1</span>..<span class="hljs-number">101</span>).collect();
</code></pre>
<p>Wie du siehst rufen wir <code>collect()</code> auf unseren Iterator auf.
<code>collect()</code> nimmt so viele Elemente wie ein Iterator ihm gibt und gibt eine Sammlung an Resultaten aus.
Warum kompiliert dieser Code also nicht?
Rust kann hier nicht erkennen, welchen Type die Elemente von <code>(0..101)</code> haben.
Die Sammlung muss aber einen Bestimmten Typ haben, also geben wir hier einfach einen an:</p>
<pre><code class="lang-rust"><span class="hljs-keyword">let</span> one_to_one_hundred = (<span class="hljs-number">1</span>..<span class="hljs-number">101</span>).collect::&lt;<span class="hljs-built_in">Vec</span>&lt;<span class="hljs-keyword">i32</span>&gt;&gt;();
</code></pre>
<p>Falls du die <code>::&lt;&gt;</code> Syntax noch vor Augen hast, sie erlaubt es uns einen Hinweis auf den Typ zu geben, denn eigentlich ist <code>collect()</code> als <code>fn collect&lt;B: FromIterator&lt;Self::Item&gt;&gt;(self)</code> implementiert.
Mit <code>_</code> k&#xF6;nnen wir einen partiellen tipp geben:</p>
<pre><code class="lang-rust"><span class="hljs-keyword">let</span> one_to_one_hundred = (<span class="hljs-number">1</span>..<span class="hljs-number">101</span>).collect::&lt;<span class="hljs-built_in">Vec</span>&lt;_&gt;&gt;();
</code></pre>
<p>Das sagt so viel wie &quot;Sammel in einen <code>Vec&lt;T&gt;</code>, aber inferiere bitte was <code>T</code> f&#xFC;r mich.&quot;
<code>_</code> hei&#xDF;t deshalb manchmal auch &quot;Typeplatzhalter&quot;.</p>
<p>Neben <code>collect()</code> gibt es auch noch <code>find()</code>.</p>
<pre><code class="lang-rust"><span class="hljs-keyword">let</span> greater_than_forty_two = (<span class="hljs-number">0</span>..<span class="hljs-number">100</span>)
                             .find(|x| *x &gt; <span class="hljs-number">42</span>);

<span class="hljs-keyword">match</span> greater_than_forty_two {
    <span class="hljs-built_in">Some</span>(_) =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Found a match!&quot;</span>),
    <span class="hljs-built_in">None</span> =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;No match found :(&quot;</span>),
}
</code></pre>
<p><code>find()</code> nimmt eine Closure und gibt das erste Elemente zur&#xFC;ck, f&#xFC;r das die Closure <code>true</code> zur&#xFC;ckgibt.
<code>find()</code> gibt ein <code>Option&lt;T&gt;</code> zur&#xFC;ck, anstatt dem Element selbst, da es ja auch nichts, <code>None</code>, finden k&#xF6;nnte.</p>
<p>Ein weiterer Konsument ist <code>fold()</code>:</p>
<pre><code class="lang-rust"><span class="hljs-keyword">let</span> sum = (<span class="hljs-number">1</span>..<span class="hljs-number">4</span>).fold(<span class="hljs-number">0</span>, |sum, x| sum + x);
</code></pre>
<p><code>fold(basis, |akkumulator, element| ...)</code> nimmt zwei Argumente:
Das erste ist ein Element, genannt <em>Basis</em>.
Das zweite ist eine Closure, die selbst zwei Argumente annimmt: den <em>Akkumulator</em> und ein <em>Element</em>.
Bei jeder Iteration wird die Closure aufgerufen und das Resultat ist bei der n&#xE4;chsten Iteration der Akkumulator.
Beim erstenmal ist die Basis noch der Akkumulator.</p>
<p>Verwirrt? Schon klar.</p>
<p>Machen wir das mal an einem Beispiel etwas deutlicher:</p>
<table>
<thead>
<tr>
<th>Basis</th>
<th>Akkumulator</th>
<th>Element</th>
<th>Closure Ergebnis</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td>0</td>
<td>3</td>
<td>3</td>
<td>6</td>
</tr>
</tbody>
</table>
<pre><code class="lang-rust"># (<span class="hljs-number">1</span>..<span class="hljs-number">4</span>)
.fold(<span class="hljs-number">0</span>, |sum, x| sum + x);
</code></pre>
<p><code>0</code> ist unsere Basis hier, <code>sum</code> ist unser Akkumulator und <code>x</code> das Element.
Beim ersten Mal ist <code>sum</code> <code>0</code> und <code>x</code> ist <code>1</code>, das erste Element von <code>nums</code>.
Dann addieren wir <code>sum</code> und <code>x</code>, also <code>0 + 1 = 1</code>.
Das Ergebnis ist beim zweiten Mal ist dann der Akkumulator, also <code>sum</code> und das n&#xE4;chste Element, <code>2</code>, ist nun unser <code>x</code>.
<code>1 + 2 = 3</code>, und dann ist das wieder <code>sum</code>.
Im letzten Durchgang ist <code>x</code> nun <code>3</code>, also <code>3 + 3 = 6</code>, fertig.</p>
<p><code>fold()</code> sieht auf den ersten Blick etwas komisch aus, aber danach siehst du dass du es &#xFC;berall brauchen wirst, immer wenn du eine Liste an Dingen hast, die du zu einem einzigen Ergebnis zusammenfassen musst.</p>
<p>Konsumenten sind vor allem aufgrund einer Eigenschaft von Iteratoren wichtig, die wir noch gar nicht besprochen hatten, Iteratoren sind faul oder &quot;lazy&quot;.
Was bedeutet das? Das sehen wir gleich wenn wir &#xFC;ber Iteratoren reden.</p>
<h2 id="iteratoren"><a name="iteratoren" class="plugin-anchor" href="#iteratoren"><span class="fa fa-link"></span></a>Iteratoren</h2>
<p>Wie wir bereits festgestellt haben sind Iteratoren etwas auf dem wir wiederholt <code>.next()</code> aufrufen k&#xF6;nnen und das uns dann eine Sequenz von Dingen gibt.
Weil du <code>.next()</code> aufrufen musst k&#xF6;nnen sich Iteratoren die Arbeit sparen,
alle Elemente im Voraus zu generieren.
Dieser Code hier zum Beispiel generiert nicht wirklich die zahlen von <code>1</code> bis <code>99</code>, sondern repr&#xE4;sentiert nur Sequenz:</p>
<pre><code class="lang-rust"><span class="hljs-keyword">let</span> nums = <span class="hljs-number">1</span>..<span class="hljs-number">100</span>;
</code></pre>
<p>Da wir mit der Range nicht wirklich irgendwas gemacht haben, hat es auch keine Sequenz generiert.
Wenn wir sie allerdings konsumieren:</p>
<pre><code class="lang-rust"><span class="hljs-keyword">let</span> nums = (<span class="hljs-number">1</span>..<span class="hljs-number">100</span>).collect::&lt;<span class="hljs-built_in">Vec</span>&lt;<span class="hljs-keyword">i32</span>&gt;&gt;();
</code></pre>
<p>dann verlangt <code>collect()</code> von unserer Range der Reihe nach jede Zahl und somit wird die Sequenz erst erzeugt.</p>
<p>Ranges sind einer von zwei grundlegenden Iteratoren wie wir kennen lernen werden.
Der andere ist <code>iter()</code>.
<code>iter()</code> macht aus einem <code>Vector</code> einen einfachen Iterator der uns jedes Element gibt:</p>
<pre><code class="lang-rust"><span class="hljs-keyword">let</span> nums = <span class="hljs-built_in">vec!</span>[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];

<span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> nums.iter() {
   <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;{}&quot;</span>, num);
}
</code></pre>
<p>Diese zwei Iteratoren sollten am Anfang reichen, es gibt aber noch fortgeschrittenere Iteratoren, inklusive unendlichen.</p>
<p>Das reicht aber erstmal. Iterator-Adapter sind das letzte Konzept dem wir uns hier widmen wollen. Also...</p>
<h2 id="iterator-adapter"><a name="iterator-adapter" class="plugin-anchor" href="#iterator-adapter"><span class="fa fa-link"></span></a>Iterator-Adapter</h2>
<p><em>Iterator-Adapter</em> nehmen Iteratoren und modifizieren sie um daraus neue Iteratoren zu machen. Der einfachste ist <code>map</code>:</p>
<pre><code class="lang-rust,ignore">(1..100).map(|x| x + 1);
</code></pre>
<p><code>map</code> ruft auf jedes Element eines Iterators eine Closure auf.
Das oben genannte Beispiel gibt uns also <code>2-100</code>.
Zumindest fast, wenn du das Beispiel kompilierst bekommst du eine Warnung:</p>
<pre><code class="lang-text">warning: unused result which must be used: iterator adaptors are lazy and
         do nothing unless consumed, #[warn(unused_must_use)] on by default
(1..100).map(|x| x + 1);
 ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
</code></pre>
<p>Hier schl&#xE4;gt die Faulheit zu!
Die Closure wird nie ausgef&#xFC;hrt werden.
Genau wie im n&#xE4;chsten Beispiel, welches <strong>keine</strong> Zahlen ausgibt:</p>
<pre><code class="lang-rust,ignore">(1..100).map(|x| println!(&quot;{}&quot;, x));
</code></pre>
<p>Wenn du einen Iterator mit Nebeneffekten verwenden willst, dann nimm lieber <code>for</code>.</p>
<p>Es gibt tonnenweise interessante Iterator-Adapter.
<code>take()</code> gibt einen Iterator &#xFC;ber die n&#xE4;chsten 5 Elemente von dem original Iterator zur&#xFC;ck.
Probieren wir das doch mal an einer unendlichen Range aus:</p>
<pre><code class="lang-rust"><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> (<span class="hljs-number">1</span>..).take(<span class="hljs-number">5</span>) {
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;{}&quot;</span>, i);
}
</code></pre>
<p>Hier bekommen wir:</p>
<pre><code class="lang-text">1
2
3
4
5
</code></pre>
<p><code>filter()</code> ist ein Adapter der eine Closure nimmt, die <code>true</code> oder <code>false</code> zur&#xFC;ck gibt.
Der neue Iterator enth&#xE4;lt dann nur Element f&#xFC;r die die Closure <code>true</code> zur&#xFC;ck gegeben hat:</p>
<pre><code class="lang-rust"><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> (<span class="hljs-number">1</span>..<span class="hljs-number">100</span>).filter(|&amp;x| x % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>) {
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;{}&quot;</span>, i);
}
</code></pre>
<p>Hier kriegen wir alle geraden Zahlen zwischen 1 und hundert.
Wichtig: <code>filter()</code> konsumiert die Elemente nicht, es gibt nur Referenzen weiter, deshalb nimmt die Closure auch nur <code>&amp;x</code> an.</p>
<p>Du kannst alle drei Sachen hintereinander h&#xE4;ngen, angefangen mit einem Iterator als &quot;Quelle&quot; ein paar Adaptern als &quot;Filter&quot; und einem Konsumenten zum Schluss:</p>
<pre><code class="lang-rust">(<span class="hljs-number">1</span>..)
    .filter(|&amp;x| x % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>)
    .filter(|&amp;x| x % <span class="hljs-number">3</span> == <span class="hljs-number">0</span>)
    .take(<span class="hljs-number">5</span>)
    .collect::&lt;<span class="hljs-built_in">Vec</span>&lt;<span class="hljs-keyword">i32</span>&gt;&gt;();
</code></pre>
<p>Das hier ergibt einen <code>Vector</code> der <code>6</code>, <code>12</code>, <code>18</code>, <code>24</code> und <code>30</code> enth&#xE4;lt.</p>
<p>Das ist nur ein kleiner Vorgeschmack darauf was man mit Iteratoren, Iterator-Adaptern und Konsumenten alles tun kann.
Es gibt eine Menge richtig n&#xFC;tzlicher Iteratoren und du kannst auch deine eigenen schreiben.
Iteratoren bieten eine sichere und effiziente Methode um all m&#xF6;glichen Listen zu manipulieren.
Am Anfang ist das vielleicht etwas ungewohnt, aber nach einer Weile will man gar nicht mehr zur&#xFC;ck.
Eine vollst&#xE4;ndige Liste aller Iteratoren und Konsumenten lies die <a href="http://doc.rust-lang.org/stable/std/iter/index.html" target="_blank">Moduldokumentation</a> f&#xFC;r Iterator.</p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../book/Dokumentation.html" class="navigation navigation-prev " aria-label="Previous page: Dokumentation"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../book/Nebenläufigkeit.html" class="navigation navigation-next " aria-label="Next page: Nebenläufigkeit"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
